<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Non-invasive Predictive Model</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root{
      --blue:#3b82f6;
      --blue-soft:#eaf2ff;
      --border:#e5e7eb;
      --text:#1f2937;
      --muted:#6b7280;
      --bg:#f8fafc;
      --card:#ffffff;
      --shadow: 0 8px 28px rgba(17,24,39,.06);
      --radius: 14px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "PingFang SC","Microsoft YaHei", sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    header{
      background:#fff;
      border-bottom:1px solid var(--border);
    }

    .header-inner{
      max-width: 1060px;
      margin: 0 auto;
      padding: 18px 16px 16px;
      text-align:center;
    }

    .h1{
      font-size: 22px;
      font-weight: 700;
      color: var(--blue);
      line-height: 1.25;
    }

    .h2{
      margin-top: 6px;
      font-size: 15px;
      font-weight: 600;
      color: var(--muted);
      line-height: 1.35;
    }

    .container{
      max-width: 1060px;
      margin: 22px auto 48px;
      padding: 0 16px;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
    }

    .card + .card{
      margin-top: 18px;
    }

    /* form area */
    .form-wrap{
      max-width: 600px;
      margin: 0 auto;
    }

    .grid{
      display: grid;
      grid-template-columns: 160px 1fr;
      gap: 16px 16px;
      align-items: center;
    }

    .lab{
      text-align: right;
      padding-right: 8px;
      font-weight: 700;
      color: #374151;
    }

    .input-row{
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 10px;
    }

    input{
      width: 100%;
      padding: 11px 12px;
      font-size: 15px;
      border: 1px solid var(--border);
      border-radius: 10px;
      outline: none;
      background: #fff;
    }

    input:focus{
      border-color: rgba(59,130,246,.55);
      box-shadow: 0 0 0 3px rgba(59,130,246,.12);
    }

    .unit{
      min-width: 44px;
      text-align: left;
      color: var(--muted);
      font-weight: 700;
      font-size: 14px;
      padding-right: 2px;
    }

    .actions{
      grid-column: 1 / -1;
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    button{
      padding: 10px 18px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #fff;
      cursor: pointer;
      font-weight: 800;
      font-size: 14px;
    }

    .primary{
      background: var(--blue);
      border-color: rgba(59,130,246,.25);
      color: #fff;
    }

    button:active{
      transform: translateY(1px);
    }

    .result{
      margin-top: 14px;
      padding: 12px 14px;
      border-radius: 12px;
      background: rgba(59,130,246,.06);
      border: 1px solid rgba(59,130,246,.18);
      font-size: 16px;
      font-weight: 800;
      color: var(--blue);
      display: none;
    }

    .hint{
      margin-top: 10px;
      color: var(--muted);
      font-size: 12.8px;
      line-height: 1.6;
    }

    /* text blocks */
    .section-title{
      font-size: 15px;
      font-weight: 900;
      color: #111827;
      margin: 0 0 10px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--blue-soft);
      text-transform: none;
    }

    .para{
      margin: 0;
      color: #111827;
      font-size: 14.5px;
      line-height: 1.75;
      white-space: pre-line;
    }

    @media (max-width: 820px){
      .grid{ grid-template-columns: 1fr; }
      .lab{ text-align: left; padding-right: 0; }
      .form-wrap{ max-width: 100%; }
    }
  </style>
</head>

<body>
<header>
  <div class="header-inner">
    <div class="h1">Children's Hospital of Nanjing Medical University</div>
    <div class="h2">Non-invasive Predictive Model for Early Liver Transplantation in Biliary Atresia</div>
  </div>
</header>

<div class="container">

  <!-- calculator -->
  <div class="card">
    <div class="form-wrap">
      <div class="grid">
        <div class="lab">LSM:</div>
        <div class="input-row">
          <input id="LSM" type="number" step="0.01" placeholder="Enter LSM" oninput="limitTwoDecimals(this)">
          <div class="unit">kPa</div>
        </div>

        <div class="lab">TCS:</div>
        <div class="input-row">
          <input id="TCS" type="number" step="0.01" placeholder="Enter TCS" oninput="limitTwoDecimals(this)">
          <div class="unit">mm</div>
        </div>

        <div class="lab">APTT:</div>
        <div class="input-row">
          <input id="APTT" type="number" step="0.01" placeholder="Enter APTT" oninput="limitTwoDecimals(this)">
          <div class="unit">s</div>
        </div>

        <div class="actions">
          <button class="primary" id="btnCalc">calculate</button>
          <button id="btnReset">resetting</button>
        </div>
      </div>

      <div class="result" id="resultBox">P =</div>
      <div class="hint"></div>
    </div>
  </div>

  <!-- Background -->
  <div class="card">
    <div class="section-title">background</div>
    <p class="para">
When an infant is diagnosed with biliary atresia, it remains challenging to determine preoperatively whether the Kasai procedure or direct liver transplantation is more beneficial for their treatment. To address this dilemma, we aim to identify non-invasive indicators and develop a predictive model to stratify high-risk patients who require early liver transplantation (within one year after the Kasai procedure).
    </p>
  </div>

  <!-- Model description -->
  <div class="card">
    <div class="section-title">model description</div>
    <p class="para">
We selected three non-invasive indicators—LSM, TCS, and APTT—and developed a nomogram prediction model, which effectively predicts high-risk children requiring early liver transplantation for biliary atresia
    </p>
  </div>

</div>

<script>
  function limitTwoDecimals(el){
    if(el.value.includes(".")){
      const parts = el.value.split(".");
      el.value = parts[0] + "." + parts[1].slice(0, 2);
    }
  }

  function num(id){
    const v = document.getElementById(id).value;
    return v === "" ? NaN : Number(v);
  }

  function round2(x){
    return Math.round(x * 100) / 100;
  }

  function computeP(LSM, TCS, APTT){
    const z = 0.077 * LSM - 0.819 * TCS - 0.079 * APTT + 3.280;
    const P = 1 / (1 + Math.exp(-z));
    return { P, z };
  }

  document.getElementById("btnCalc").addEventListener("click", () => {
    const LSM = round2(num("LSM"));
    const TCS = round2(num("TCS"));
    const APTT = round2(num("APTT"));

    const box = document.getElementById("resultBox");

    if (![LSM, TCS, APTT].every(Number.isFinite)) {
      box.style.display = "block";
      box.style.color = "#ef4444";
      box.style.background = "rgba(239,68,68,.06)";
      box.style.borderColor = "rgba(239,68,68,.18)";
      box.textContent = "Please enter valid numeric values for LSM, TCS and APTT.";
      return;
    }

    const out = computeP(LSM, TCS, APTT);

    box.style.display = "block";
    box.style.color = "var(--blue)";
    box.style.background = "rgba(59,130,246,.06)";
    box.style.borderColor = "rgba(59,130,246,.18)";
    box.textContent = "P = " + out.P.toFixed(6);
  });

  document.getElementById("btnReset").addEventListener("click", () => {
    document.getElementById("LSM").value = "";
    document.getElementById("TCS").value = "";
    document.getElementById("APTT").value = "";
    const box = document.getElementById("resultBox");
    box.style.display = "none";
    box.textContent = "P =";
  });
</script>
</body>
</html>
